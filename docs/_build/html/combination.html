

<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Combination &mdash; SunFounder_PiCar-S  ドキュメント</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="Appendix" href="appendix.html" />
    <link rel="prev" title="Line Following" href="line_following.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder_PiCar-S
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components_list.html">Components List</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_the_car.html">Building the Car</a></li>
<li class="toctree-l1"><a class="reference internal" href="circuits_building.html">Circuits Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_started_with_raspberry_pi.html">Get Started with Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="servo_configuration.html">Servo Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Calibration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="arming_the_car.html">Arming the Car!</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="obstacle_avoidance.html">Obstacle Avoidance</a></li>
<li class="toctree-l2"><a class="reference internal" href="light_following.html">Light Following</a></li>
<li class="toctree-l2"><a class="reference internal" href="line_following.html">Line Following</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Combination</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it works</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder_PiCar-S</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="arming_the_car.html">Arming the Car!</a> &raquo;</li>
        
      <li>Combination</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/combination.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="combination">
<h1>Combination<a class="headerlink" href="#combination" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>So, this smart car now is smart in three separate features. But, you
think only one sensor module is not enough? Try to combine those sensor
modules in one! Here we can show you an experiment - light following
with obstacle avoidance for reference.</p>
<p>When the car runs with the light follower, sometimes it may crash into
obstacles when following the light, and it’s not quite convenient to let
the car move back (though we've set the car to move backward if the
array is [1,0,1], it’s hard to acquire these values since the the car is
moving and the light cannot be exactly as required sometimes). So we
consider Also, you can let the car move backwards by a paper board or
your foot, which is quite easy.</p>
<p>Check below the program of this example.</p>
<p>Assemble the light follower module and ultrasonic obstacle avoidance
module on the car first.</p>
<p>Log into the Raspberry Pi on your computer via ssh, and get into the
directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">SunFounder_PiCar</span><span class="o">-</span><span class="n">S</span><span class="o">/</span><span class="n">example</span>
</pre></div>
</div>
<p>Run the code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">light_with_obsavoidance</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Set the obstacle avoidance as a superior priority than light following:
if there is an obstacle in front of the car, it walk away from the
obstacle and back to the track; if not, then the car will keep follow
light.</p>
<p>Since the light following and obstacle avoidance of the car depend on
the sensor modules, we set two functions to read the status of two
sensors separately, and assign values to flags to be returned from the
functions: <strong>state_light()</strong>, and <strong>state_sonic()</strong>.</p>
<p>In the function <strong>state_sonic()</strong>, the return value is <strong>avoid_flag</strong>.</p>
<blockquote>
<div><p>If the car is <strong>close to</strong> an obstacle, it will return <strong>avoid_flag =2</strong>;</p>
<p>if it is <strong>too close to</strong> the obstacle, it will return <strong>avoid_flag =1</strong>;</p>
<p>if ahead <strong>no obstacle</strong> is detected near, it will return <strong>avoid_flag =0</strong>.</p>
</div></blockquote>
<p>In the function <strong>state_light()</strong>, the return value is <strong>light_flag</strong>.</p>
<blockquote>
<div><p>If the light spot is <strong>in front of</strong> the car, it will return <strong>light_flag = 0</strong>;</p>
<p>if the spot is <strong>at the right side</strong>, it will return <strong>light_flag = 1</strong>;</p>
<p>if the spot is <strong>at the left side</strong>, it will return <strong>light_flag = 2</strong>;</p>
<p>if the spot is <strong>at the back</strong>, it will return <strong>light_flag = 3</strong>;</p>
<p>if <strong>no light spot</strong> is detected, it will return <strong>light_flag = 4</strong>.</p>
</div></blockquote>
<p>The main program <strong>main()</strong> will run the corresponding program according
to <strong>avoid_flag</strong> and <strong>light_flag</strong>, and the <strong>avoid_flag</strong> is superior
in priority.</p>
<img alt="_images/image251.png" src="_images/image251.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="appendix.html" class="btn btn-neutral float-right" title="Appendix" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="line_following.html" class="btn btn-neutral float-left" title="Line Following" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, sunfounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>